### **操作场景**

休眠实例时，操作系统会将内存中的数据（操作系统内正在运行的各种应用程序和使用状态）保留到实例的系统盘。当用户下次启动时，操作系统会读取上次保留的内存数据，自动恢复到休眠前 CVM 实例的运行状态。

和关机的区别是，关机后再次启动实例，操作系统会重新启动后台服务和应用程序。

如果您在某个时间段无需运行实例，也不需要执行某些操作（如调整配置、重装系统等），建议您休眠实例。


### **使用前提**

1、休眠实例目前仅对国际站硅谷地域开放，其他地域会逐步开放中；

2、目前仅支持标准型 S3 实例且内存小于150 GIB，可选择开启休眠功能，其他实例类型会逐步开发中；

3、镜像为自定义镜像：Ubuntu20、CentOS 8.x，可选择开启休眠功能；

4、系统盘为云盘，可选择开启休眠功能；

5、实例安装了休眠 agent。

### **注意事项**

1、创建实例时开启了休眠功能后，不支持关闭该功能；

2、创建实例时未开启休眠功能，则不能操作实例进入休眠状态；

3、 按量计费支持休眠不收费和保留实例继续收费；竞价实例只支持休眠继续收费。

4、 创建实例时已开启了休眠功能，则不支持以下操作：

  - 不支持调整配置
    
  - 不支持重装系统
    
  - 不支持创建快照
    
  - 不支持调整硬盘介质
    
  - 不支持创建自定义镜像
    

5、弹性伸缩组内的实例不支持休眠。

>!
>1、 在实例内部操作休眠，则休眠收费；
>2、 休眠失败后，实例自动为“运行中”状态。


### **操作步骤**

1、 在创建时开启休眠

在创建实例时，需先开启休眠功能，否则无法使实例进入休眠状态。

2、安装休眠 agent

  - 登录到 cvm 实例内部

  - 下载 agent 脚本： wget https://store-1252113659.cos.na-siliconvalley.myqcloud.com/suspend.py 

  - 安装 agent :   

    - 如果是 centos 机器： python3 suspend.py

    - 如果是 ubuntu 机器：sudo python3 suspend.py


3、使实例进入休眠状态

当 CVM 实例开启了休眠，并安装了休眠 agent，可以使运行中的实例进入休眠状态。

  - 进入 CVM 控制台-实例与镜像-实例页面，选择想要休眠的实例，点击实例设置-休眠；

  - 按量计费的实例可选择休眠不收费和保留实例继续收费，竞价实例只支持休眠继续收费。

  - 点击确定，则实例进入 stopped 状态。如需启动实例，可选择开机。