## Overview
This document describes how to create a node pool in a cluster via the TKE console and describes node pool-related operations, such as viewing, managing, and deleting a node pool.


## Prerequisites
- You are familiar with the [Node Pool Concepts](https://intl.cloud.tencent.com/document/product/457/35900).
- You have [created a cluster](https://intl.cloud.tencent.com/document/product/457/30637).

## Directions

1. Log in to the [TKE console](https://console.cloud.tencent.com/tke2) and click **Cluster** on the left sidebar.
2. On the **Cluster Management** page, select the target cluster ID to enter the cluster details page.
3. Click **Node Management** > **Node Pool** on the left sidebar to enter the node pool list page as shown below:
![](https://staticintl.cloudcachetci.com/yehe/backend-news/hwPs644_%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20221215170020.png)
4. Click **Create node pool** to open the **Create node pool** page. Specify the configurations.
![](https://staticintl.cloudcachetci.com/yehe/backend-news/hKPg973_%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20221215170204.png)
- **Node pool name**: Enter a custom pool name.
- **Operating System**: select an OS based on actual needs. This OS takes effect on the node pool level and can be modified. After modification, the new OS only take effect for the new nodes in the node pool, rather than the existing nodes.
 - **Billing Mode**: The **pay-as-you-go** or **spot instance** billing mode can be selected as needed. For more information, see [Billing Mode](https://intl.cloud.tencent.com/document/product/213/2180).
- **Supported Network**: the system will assign IP addresses within the address range of the node network for servers in the cluster.
>! This field is specified at the cluster level, which cannot be modified after configuration.
>

- **Model Configuration**: click **Select a Model**. On the “Model Configuration” page, select the values as needed based on the following descriptions:
  
  - **Availability Zone**: launch configurations do not contain availability zone information. This option is only used to filter available instance types in the availability zone.
  - **Model**: you can select the model by specifying the number of CPU cores, memory size, and instance type. For more information, see [Instance Types](https://intl.cloud.tencent.com/document/product/213/11518).
  - **System disk**: controls the storage and schedules the operating of Cloud Virtual Machines (CVMs). You can view the system disk types available for the selected model and select the system disk as needed. For more information, see [Cloud Disk Types](https://intl.cloud.tencent.com/document/product/362/31636).
  - **Data disk**: stores all the user data. You can specify the values according to the following descriptions. Each model corresponds to different data disk settings. For more information, see the following table:
  <table>
  <tr>
  <th>Model</th>
  <th>Data Disk Settings</th>
  </tr>
  <tr>
  <td>Standard, Memory Optimized, Computing, and GPU</td>
  <td>No option is selected by default. If you select any of these options, you must specify the cloud disk settings and formatting settings.</td>
  </tr>
  <tr>
  <td>High I/O and Big Data</td>
  <td>These options are selected by default and cannot be cleared. You can customize the formatting settings for the default local disks.</td>
  </tr>
  <tr>
  <td>Batch-based</td>
  <td>This option is selected by default, but can be cleared. If this option is selected, you can purchase only default local disks. You can customize the formatting settings for the default local disks.</td>
  </tr>
</table>
  
  - **Add Data Disk (optional)**: Click **Add Data Disk** and set it according to the table above.
    - **Public Network Bandwidth**: **Assign free public IP** is selected by default, indicating that the system will assign a public IP for free. Billing by traffic or by bandwidth can be selected as needed. For billing details, see [Public Network Billing](https://intl.cloud.tencent.com/document/product/213/10578). You can customize the network speed.
 - **Login Method**: you can select any one of the following login methods as required:
    - **SSH Key Pair**: a key pair is a pair of parameters generated by using an algorithm. Using a key pair to log in to a CVM instance is more secure than using regular passwords. For more information, see [SSH Key](https://intl.cloud.tencent.com/document/product/213/6092).
     - **SSH Key**: this parameter displays only when **SSH Key Pair** is selected. Select an existing key in the drop-down list. For how to create a key, see [Creating an SSH key](https://intl.cloud.tencent.com/document/product/213/16691).
    - **Random password**: The system sends an automatically generated password to your [Message Center](https://console.cloud.tencent.com/message).  
    - **Custom password**: Set a password as prompted.
 - **Security Groups**: the default value is the security group specified when the cluster is created. You can replace the security group or add a security group as required.
 - **Quantity**: the desired capacity. You can specify this value as required.
>! If auto scaling has been enabled for the node pool, this quantity will be automatically adjusted based on the loads of the cluster.
>
 - **Node Quantity Range**: the number of nodes will be automatically adjusted within the specified node quantity range, which will not exceed the specified range.
 - **Supported subnets**: select an available subnet as required.
>? The default multiple subnets scale-out policy of node pool is that if you have configured multiple subnets, when the node pool performs scale-out (manual scale-out and auto scaling), it creates nodes based on the priority determined by the order in the subnet list. If a node can be successfully created in the subnet of the highest priority, all nodes will be created in the subnet.
>

5. (Optional) Click **More Settings** to view or configure more information as shown below:
![](https://staticintl.cloudcachetci.com/yehe/backend-news/P6ag332_%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20221215171708.png)

 - **CAM Role**: binds the same CAM role to all nodes in the node pool, granting the authorization policy of this role to the nodes. For more information, please see [Managing Roles](https://intl.cloud.tencent.com/document/product/213/45917).
 - **Container Directory**: Select this option to set up the container and image storage directory. We recommend that you store to the data disk, such as `/var/lib/docker`.
  - **Security Services**: Free DDoS, Web Application Firewall (WAF) and Cloud Workload Protection (CWP) are activated by default. For more information, see [Cloud Workload Protection](https://www.tencentcloud.com/products/cwp).
  - **Cloud monitor**: Free monitoring, analysis, and alarms are activated by default, and components are installed to obtain CVM monitoring metrics. For more information, see [Cloud Monitor](https://www.tencentcloud.com/products/cm).
  - **Auto scaling**: **Enable** is selected by default.
  - **Cordon initial nodes**: If **Cordon this node** is selected, new Pods cannot be scheduled to this node. You can uncordon the node manually, or execute the [uncordon command](https://intl.cloud.tencent.com/document/product/457/30654) in custom data as needed.
  - **Label**: Click **New Label** and customize the settings of the label. The specified label here will be automatically added to nodes created in the node pool to help filter and manage nodes by label.
  - **Taints**: This is a node-level attribute and is usually used with `Tolerations`. You can specify this parameter for all the nodes in the node pool, so as to stop scheduling Pods that do not meet the requirements to these nodes and drain such Pods from the nodes.
>?The value of Taints usually consists of `key`, `value`, and `effect`. Valid values of `effect`:
> - **PreferNoSchedule**: optional condition. Try not to schedule a Pod to a node with a taint that cannot be tolerated by the Pod.
> - **NoSchedule**: when a node contains a taint, a Pod without the corresponding toleration cannot be scheduled.
> - **NoExecute**: when a node contains a taint, a Pod without the corresponding toleration to the taint will not be scheduled to the node and any such Pods already on the node will be drained.
>
  Assume that Taints is set to `key1=value1:PreferNoSchedule`. The following figure shows the configurations in the TKE console:
  ![](https://main.qcloudimg.com/raw/9f8c0a99099ff58c12ee0d0ad2349b9e.png)
  - **Retry Policy**: select one of the following policies as required.
    - **Try again**: retry immediately. The system stops retrying after failing five times in a row.
    - **Retry with incremental intervals**: the retry interval extends as the number of consecutive failures increases. The value ranges from seconds to one day.
   - **Scaling Mode**: select one of the following two scaling modes as required.
     - **Release Mode**: if this mode is selected, the system automatically releases idle nodes as determined by Cluster AutoScaler during scale-in and automatically creates and adds a node to scaling groups during scale-out.
     - **Shutdown Mode**: if this mode is selected, during scale-out, the system preferably starts nodes that have been shut down, and if the number of nodes still fails to meet requirements, the system creates the desired number of nodes. During scale-in, the system shuts down idle nodes. If the nodes support the No Charges When Shut Down feature, the nodes that are shut down will not be billed, but remaining nodes are still billed. For more information, see [No Charges When Shut down for Pay-as-You-Go Instances Details](https://intl.cloud.tencent.com/document/product/213/19918).
   - **Custom Data**: Specify custom data to configure the node, that is, to run the configured script when the node is started up. You need to ensure the reentrant and retry logic of the script. The script and its log files can be viewed at the node path: `/usr/local/qcloud/tke/userscript`.

6. Click **Create Node Pool**.

## Relevant operations

After a node pool is created, you can manage the node pool according to the following documents:

- [Viewing a Node Pool](https://intl.cloud.tencent.com/document/product/457/35902)
- [Adjusting a Node Pool](https://intl.cloud.tencent.com/document/product/457/35903)
- [Deleting a Node Pool](https://intl.cloud.tencent.com/document/product/457/35904)
