
[TencentDB for MySQLコンソール](https://console.cloud.tencent.com/cdb)  でパラメータの一部を確認、変更でき、また、コンソールでパラメータ変更履歴を問い合わせることもできます。
>?マスターインスタンスと読み取り専用インスタンスの両方で、コンソールでパラメータを変更することがサポートされています。処理方法も同様です。処理は以下を参照してください。

## 注意事項
- インスタンスの安定性を確保するために、コンソールでパラメーターの一部だけを変更できます。コンソールの[パラメータ設定]ページに表示されるパラメータは、ユーザーが変更できるパラメータです。
- 変更されたパラメータを有効にするためにインスタンスを再起動する必要がある場合は、再起動するかを確認するメッセージが表示されます。サービスのオフピーク時間帯に操作すること、及びアプリケーションに再接続メカニズムがあることを確認することをお勧めします。
- デフォルトの式に戻したい場合は、入力したパラメータの内容を空にして適用します。

## パラメータリストのパラメータの変更
### [パラメータの一括変更](id:plxgcs)
1. [MySQLコンソール](https://console.cloud.tencent.com/cdb)にログインし、インスタンスリストのインスタンスIDまたは**操作**列の**管理**をクリックして、インスタンス管理ページに進みます。
2. **データベース管理** > **パラメータ設定**ページを選択し、**パラメータの一括変更**をクリックします。
マスターインスタンス画面は以下のとおりです：
![](https://qcloudimg.tencent-cloud.cn/raw/0236dc88558f16937f71daca3e2d8d0f.png)
3. **パラメータ運用値**列で、変更したいパラメータを選択して変更し、間違いがないか確認した後**変更を確認**をクリックします。
![](https://qcloudimg.tencent-cloud.cn/raw/1f904a228aa0ee6bb28f870f3238396c.png)
4. ポップアップしたダイアログボックスで、パラメータタスクの**実行方式**を選択し、**OK**をクリックします。
>?
>- **今すぐ実行**を選択すると、選択したインスタンスのパラメータ変更タスクが直ちに実行され、有効になります。
>- **メンテナンス時間帯**を選択すると、選択したインスタンスのパラメータ変更タスクがインスタンスの[メンテナンス時間](https://intl.cloud.tencent.com/document/product/236/10929)帯に実行され、有効になります。
>

### [単一パラメータの変更](id:xgdgcs)
1. [TencentDB for MySQLコンソール](https://console.cloud.tencent.com/cdb)にログインし、インスタンスリストでインスタンスIDをクリックして、インスタンス管理ページに進みます。
2. **データベース管理** > **パラメータ設定**ページを選択し、目的のパラメータが存在する行を選択し、**パラメータ運用値**列で、<img src="https://main.qcloudimg.com/raw/788902e3f8c335cf17de420f7181c2a8.png"  style="margin:0;">をクリックしてパラメータ値を変更します。
![](https://qcloudimg.tencent-cloud.cn/raw/d6bce1222a71d69a26bfc85a52feedea.png)
3. **変更可能なパラメータ値**列の表示に基づき、目的のパラメータ値を入力し、<img src="https://main.qcloudimg.com/raw/1f4c7f2e0744bc601efb5d9fb04a7a04.png"  style="margin:0;">をクリックして保存します。<img src="https://main.qcloudimg.com/raw/2106cb4b9337a1a2fff5908581d2a908.png"  style="margin:0;">をクリックすると操作をキャンセルできます。
![](https://main.qcloudimg.com/raw/41c7d73d4c5d404a112f54c3a63da726.png)
4. ポップアップしたダイアログボックスで、パラメータタスクの**実行方式**を選択し、**OK**をクリックします。
>?
>- **今すぐ実行**を選択すると、選択したインスタンスのパラメータ変更タスクが直ちに実行され、有効になります。
>- **メンテナンス時間帯**を選択すると、選択したインスタンスのパラメータ変更タスクがインスタンスの[メンテナンス時間](https://intl.cloud.tencent.com/document/product/236/10929)帯に実行され、有効になります。
>

## パラメータテンプレートをインポートしてパラメータを変更する
### 方法1：パラメータ設定ページからインポートする
1. [TencentDB for MySQLコンソール](https://console.cloud.tencent.com/cdb)にログインし、インスタンスリストでインスタンスIDをクリックして、インスタンス管理ページに進みます。
2. **データベース管理** > **パラメータ設定**ページを選択し、**カスタムテンプレート**（これまでに常に使用するカスタムテンプレートを設定していない場合は、MySQLコンソールで、左側のナビゲーションバーのパラメータテンプレートからカスタムテンプレートを見つけ、テンプレートの作成をクリックすると、パラメータテンプレートを事前に設定することができます。その後、手順2でカスタムテンプレートからインポートできます）。
![](https://qcloudimg.tencent-cloud.cn/raw/4eab1607d41b9bb420135141d68da1b6.png)
3. ポップアップしたダイアログボックスで、パラメータテンプレートを選択し、**インポートして元のパラメータを上書きする**をクリックします。
![](https://qcloudimg.tencent-cloud.cn/raw/8bb98a9e921f3aae984d12b3dc7909c1.png)
4. パラメータを確認後、**変更を確認**をクリックします。
![](https://qcloudimg.tencent-cloud.cn/raw/1fa0b69eda99b5d4a799082cf8fde7e5.png)
5. ポップアップしたダイアログボックスで、パラメータタスクの**実行方式**を選択し、**OK**をクリックします。
>?
>- **今すぐ実行**を選択すると、選択したインスタンスのパラメータ変更タスクが直ちに実行され、有効になります。
>- **メンテナンス時間帯**を選択すると、選択したインスタンスのパラメータ変更タスクがインスタンスの[メンテナンス時間](https://intl.cloud.tencent.com/document/product/236/10929)帯に実行され、有効になります。
>

### 方法2：パラメータ設定ファイルをインポートしてパラメータを変更する
1. [TencentDB for MySQLコンソール](https://console.cloud.tencent.com/cdb)にログインし、インスタンスリストでインスタンスIDをクリックして、インスタンス管理ページに進みます。
2. **データベース管理** >**パラメータ設定**ページを選択し、**パラメータのインポート**をクリックします。
![](https://qcloudimg.tencent-cloud.cn/raw/81f1a98c44457434e69d9660c084a358.png)
3. **ファイルを選択**をクリックして必要なパラメータファイルを見つけた後、**インポートして元のパラメータを上書きする**をクリックします。
![](https://main.qcloudimg.com/raw/42fb6ef8936131a3bc776e492478e745.png)
4. パラメータを確認後、**変更を確認**をクリックします。
5. ポップアップしたダイアログボックスで、パラメータタスクの実行方式を選択し、**OK**をクリックします。
>?
>- **今すぐ実行**を選択すると、選択したインスタンスのパラメータ変更タスクが直ちに実行され、有効になります。
>- **メンテナンス時間帯**を選択すると、選択したインスタンスのパラメータ変更タスクがインスタンスの[メンテナンス時間](https://intl.cloud.tencent.com/document/product/236/10929)帯に実行され、有効になります。


### 方法3：パラメータテンプレートページからインポートする
[インスタンスへのパラメータテンプレートの適用](https://intl.cloud.tencent.com/document/product/236/31906)をご参照ください。

## デフォルトテンプレートに戻す
1. [TencentDB for MySQLコンソール](https://console.cloud.tencent.com/cdb)にログインし、インスタンスリストでインスタンスIDをクリックして、インスタンス管理ページに進みます。
2. **データベース管理** > **パラメータ設定**を選択し、**デフォルトテンプレート**をクリックすると、**高安定性テンプレート**または**高性能テンプレート**を選択できます。その後、**インポートして元のパラメータを上書きする**をクリックします。
![](https://qcloudimg.tencent-cloud.cn/raw/030f986ea488796d5c084cb97aec5d6b.png)
3. **変更を確認**をクリックすると、パラメータ変更確認ウィンドウに移動します。
![](https://qcloudimg.tencent-cloud.cn/raw/5ba2e9ba71f33211db43637e0aed8f37.png)
4. ポップアップしたダイアログボックスで、パラメータタスクの実行方式を選択し、**再起動ルール**を読んでチェックを入れ、**OK**をクリックします。
>?
>- **今すぐ実行**を選択すると、選択したインスタンスのパラメータ変更タスクが直ちに実行され、有効になります。
>- **メンテナンス時間帯**を選択すると、選択したインスタンスのパラメータ変更タスクがインスタンスの[メンテナンス時間](https://intl.cloud.tencent.com/document/product/236/10929)帯に実行され、有効になります。
>

## パラメータ数式[](id:CSGSMYSQL)
インスタンスのパラメータ設定における式の使用をサポートしています。インスタンス仕様に関連するパラメータを式として設定し、インスタンス仕様に変更が生じた場合、ここに設定したパラメータ値が動的に変化し、変更後の仕様を引き続き適用できます。これにより、インスタンスを常に業務の実行に必要な最適な状態に維持することができます。

参考として、パラメータinnodb_buffer_pool_sizeで{DBinitMemory\*786432}を設定した場合、インスタンス仕様中のDBinitMemoryを変更すると、この中のパラメータ設定を変更しなくても、innodb_buffer_pool_sizeの値は自動的に変更されます。
![](https://qcloudimg.tencent-cloud.cn/raw/696a0d3be52c058124f7c678a18e6b27.png)

式構文に関するサポートについては、下表をご参照ください。

| サポート種類 | サポートの説明                                                     | 例                                                         |
| :------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| 変数     | DBinitMemory：インスタンス仕様のメモリサイズ、整数型。例えば、インスタンス仕様のメモリサイズが4000MBの場合、DBinitMemoryの値は4000です。DBInitCpu：インスタンス仕様のCPUコア数、整数型。例えば、インスタンス仕様が8コアの場合、DBInitCpuの値は8です。| {DBinitMemory * 786432} は、メモリサイズ（DBinitMemory）* パーセンテージ（システムでデフォルトで75%とする）* 1024 * 1024（単位換算） |
| 演算子   | 式構文：`{}`で囲みます。除算演算子（/）：被除数を除数で除し、整数型の商を返します。計算結果が小数の場合、小数部分を切り捨てて整数部分を取ります。小数部分の演算はサポートされません。例えば、システムは{MIN(DBInitMemory/4+500,1000000)}をサポートし、{MIN(DBInitMemory\*0.25+500,1000000)}をサポートしません。乗算演算子（\*）：2つの数を乗算し、整数型の積を返します。計算結果に小数がある場合、小数部分を切り捨てて整数部分を取ります。小数部分の演算はサポートされません。 | -                                                            |
| 関数     | 関数 MAX()、整数型またはパラメータ式リスト中の最大値を返します。関数 MIN()、整数型またはパラメータ式リスト中の最小値を返します。 | {MAX(DBInitCpu/2,4)}                                         |


### パラメータ式をサポートするパラメータ
>?TencentDB for MySQLは、パラメータ設定を継続的に最適化します。パラメータ式をサポートする一部のパラメータのみを以下に示します。コンソールのパラメータテンプレートでさらに多くのパラメータ式を確認できます。

| パラメータ名        | パラメータ説明                           | デフォルト式                          |
| :----------------- | :-------------------------------- | :-------------------------------- |
| thread_pool_size             | このパラメータにスレッドプール中のスレッドグループ数を設定します。デフォルトの場合、スレッドグループ数はCPU数と同じです。| {MIN(DBInitCpu,64)}               |
| table_open_cache_instances   | MySQLがtableハンドルをキャッシングするパーティションの数を指します。                   | {MIN(DBInitMemory/1000,16)}       |
| table_open_cache             | テーブルディスクリプションキャッシュのサイズであり、ファイルを開く/閉じる回数を減らすことができます。                  | {MAX(DBInitMemory\*512/1000,2048)} |
| table_definition_cache       | 開かれたテーブルキャッシュインスタンスの数。                                     | {MAX(DBInitMemory\*512/1000,2048)} |
| max_connections              | 最大接続数。                                                 | {MIN(DBInitMemory/4+500,1000000)} |
| join_buffer_size             | 一般インデックススキャン、範囲インデックススキャン、テーブル全体スキャンに使用されるテーブル接続のバッファの最小サイズ。| {MIN(DBInitMemory\*128,262144)}    |
| innodb_write_io_threads      | InnoDBにおける、書き込み操作に使用される I/Oスレッド数。                           | {MAX(DBInitCpu/2,4)}              |
| innodb_read_io_threads       |  InnoDBにおける、読み取り操作に使用される I/Oスレッド数。                           | {MAX(DBInitCpu/2,4)}              |
| innodb_buffer_pool_instances | InnoDBバッファプールに分割された領域数。                                  | {MIN(DBInitMemory/2000,16)}       |
| innodb_buffer_pool_size      | バッファプールのサイズ(バイト単位）であり、InnoDBがテーブルやインデックスデータをキャッシングする時に使用するメモリ領域です。| {DBInitMemory\*786432}             |


## パラメータ設定をファイルとしてエクスポートする
1. [TencentDB for MySQLコンソール](https://console.cloud.tencent.com/cdb)にログインし、インスタンスリストでインスタンスIDをクリックして、インスタンス管理ページに進みます。
2. **データベース管理** > **パラメータ設定**ページを選択し、**パラメータのエクスポート**をクリックし、パラメータ設定ファイルをエクスポートします。
![](https://qcloudimg.tencent-cloud.cn/raw/5a8357f189cc68ff63ccfe08efecaec4.png)

## パラメータ設定をテンプレートとしてエクスポートする
1. [TencentDB for MySQLコンソール](https://console.cloud.tencent.com/cdb)にログインし、インスタンスリストでインスタンスIDをクリックして、インスタンス管理ページに進みます。
2. **データベース管理** > **パラメータ設定**ページを選択し、**テンプレートとして保存**をクリックすると、現在のパラメータ設定をパラメータテンプレートとして保存することができます。
![](https://qcloudimg.tencent-cloud.cn/raw/5e93d4f27f975b7d7adac82ff42d7fae.png)

## カスタム時間ウィンドウでパラメータを変更する
パラメータ変更の最後のステップを実行するとき、ポップアップダイアログボックスで、パラメータの変更時間をカスタマイズできます。
>?**メンテナンス時間帯**を選択すると、選択したインスタンスのパラメータ変更タスクがインスタンスの[メンテナンス時間](https://intl.cloud.tencent.com/document/product/236/10929)帯に実行され、有効になります。
>
![](https://qcloudimg.tencent-cloud.cn/raw/33fb2f56d3fb40db0a6771fa8fb43825.png)

## パラメータ変更タスクをキャンセルする
**メンテナンス時間帯**を選択してパラメータ変更タスクを送信した後、パラメータの変更をキャンセルしたい場合は、タスク実行前（タスクのステータスが**実行待ち**の場合）に、左側ナビゲーションバーの[**タスクリスト**](https://console.cloud.tencent.com/mysql/task)ページで**操作**列の**元に戻す**をクリックすると、パラメータ変更タスクをキャンセルすることができます。
![](https://main.qcloudimg.com/raw/566fd9374d0d59b38ceb99d310b782a9.png)

## パラメータ変更履歴を確認する
1. [TencentDB for MySQLコンソール](https://console.cloud.tencent.com/cdb)にログインし、インスタンスリストでインスタンスIDをクリックして、インスタンス管理ページに進みます。
2. **データベース管理** > **パラメータ設定**ページを選択し、右側の**最近の変更履歴**をクリックします。
![](https://main.qcloudimg.com/raw/93494ebb3b80a6547f1c6fe7bcbf9c8a.png)
3. パラメータの変更履歴ページでは、最近のパラメータ変更履歴を確認できます。

## 後続の操作
- データベースパラメータテンプレートを使用して、データベースのパラメータ設定を一括管理できます。詳細については、[パラメータテンプレートの使用](https://intl.cloud.tencent.com/document/product/236/31906)をご参照ください。
- 重要なパラメーターの設定に関する提案については、[パラメーター設定に関する提案](https://intl.cloud.tencent.com/document/product/236/38056)をご参照ください。
