
TencentDB for MySQLは、カーネルのマイナーバージョンの自動または手動アップグレードをサポートします。カーネルマイナーバージョンをアップグレードすれば、新機能を利用でき、パフォーマンスを向上させ、トラブルシューティングなどを実現することが可能です。
TencentDB for MySQLのカーネルマイナーバージョンの詳細な機能については[カーネルバージョンの更新](https://intl.cloud.tencent.com/document/product/236/35989)をご参照ください。

>?単一ノード - クラウドディスク版のインスタンスは、現在カーネルマイナーバージョンのアップグレードをサポートしていません。

## ユースケース
- **自動アップグレードがトリガーされるシーン**：
 - シーン1：TencentDB for MySQLに重大なバグやセキュリティホールが発生した場合、システムはお客様のメンテナンス時間帯にデータベースのカーネルマイナーバージョンのアップグレードを開始します。事前にプライベートメッセージ、ショートメッセージなどの方法でアップデートの通知をお送りいたします。
 - シーン2：TencentDB for MySQLがインスタンスの移行をトリガーする操作（インスタンス仕様のアップ/ダウングレード、磁気ディスク容量のスケーリング、データベースのバージョンアップ等）を行った場合、システムはお客様のインスタンスを最新のカーネルマイナーバージョンにアップグレードいたします。マスターインスタンスにROインスタンスがある場合、マスターとスレーブの同期互換性が自動的に判断され、マスターインスタンスの移行時にROインスタンスよりも更新されたマイナーバージョンは使用されません。
- **手動アップデートのシーン**：
自動アップデートのシーン以外に、ユーザーはコンソールでカーネルマイナーバージョンのアップデートを手動で行うことができます。


## アップデートに関するルール
- **アップデートするカーネルマイナーバージョンが他のインスタンス（マスターインスタンス、読み取り専用インスタンス）に関連付けられている場合、データレプリケーションの一致性を確保するために、関連インスタンスは、カーネルマイナーバージョンと合わせてアップデートします。
- TencentDB for MySQLのバージョンのアップグレードをする場合、データを移行する必要があります。通常、移行の速度はデータサイズに依存しますので、しばらくお待ちください。この作業期間中、サービスは中断されることなく正常に利用できます。

## 注意事項
- バージョンアップ完了時に、インスタンスの切り替え（MySQLデータベースの接続が数秒間切断される）が発生します。プログラムの自動再接続機能を有効にし、また、インスタンスのメンテナンスを実行可能な時間を選択して切り替えを実行することをお勧めします。[インスタンスのメンテナンス時間設定](https://intl.cloud.tencent.com/document/product/236/10929)をご参照ください。
- 単一インスタンスのテーブル数が100万を超えた場合は、アップグレードのエラーになる恐れがあり、データベースへの監視にも影響を与えます。そのために、単一インスタンスのテーブル数が100万を超えないようにテーブルの数を適切に管理してください。
- カーネルマイナーバージョンのアップグレード後は、ダウングレードすることはできません。

## 操作手順
1. [MySQLコンソール](https://console.cloud.tencent.com/cdb)にログインし、インスタンスリストのインスタンスIDまたは**操作**の列の**管理**をクリックし、インスタンス詳細ページに進みます。
2. インスタンス詳細画面の**設定情報**で**カーネルマイナーバージョンのアップグレード**をクリックします。
![](https://main.qcloudimg.com/raw/3fda3cffc784b3cde619e698d728d486.png)
3. ポップアップされたダイアログボックスで、関連する設定を選択してから、**アップグレード**をクリックします。
**データ検証遅延しきい値**：(この設定は、マスターインスタンスがアップグレードされた場合にのみ表示されます)しきい値は1秒から10秒までの整数です。データ整合性チェックプロセスで遅延が発生する可能性があるため、データ遅延しきい値を設定する必要があります。遅延が設定値を超えた場合、データベース整合性チェックが停止し、指定しきい値以下になった後にデータベースの整合性チェックタスクが再開されます。このしきい値が小さい場合、移行時間が長くなる可能性があります。
>!データベースのカーネルマイナーバージョンのアップグレードを実行する場合、データを移行する必要があります。アップグレードが完了する際に、MySQLデータベースの接続が数秒間切断されます。切り替え時間を**メンテナンス時間帯**に指定することをお勧めします。この場合、インスタンスのアップグレード完了後の次の**メンテナンス時間帯**、切り替えを実行します。
>
![](https://qcloudimg.tencent-cloud.cn/raw/c758e092bce297bbfeb553297bf9b266.png)
