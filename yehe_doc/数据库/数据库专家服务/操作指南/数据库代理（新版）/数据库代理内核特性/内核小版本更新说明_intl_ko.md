본문은 TencentDB for MySQL 데이터베이스 프록시의 버전 업데이트에 대해 설명합니다.

## 데이터베이스 프록시 버전 조회
버전은 [데이터베이스 프록시](https://www.tencentcloud.com/document/product/236/42052) 탭의 **개요** > **프록시 버전**에서 확인할 수 있습니다.
![](https://staticintl.cloudcachetci.com/yehe/backend-news/A5SJ759_4.png)

## 버전 업그레이드 설명
>?MySQL 커널 버전 요구 사항이 충족되지 않으면 [커널 마이너 버전 업그레이드](https://intl.cloud.tencent.com/document/product/236/36816)의 설명에 따라 데이터베이스의 커널 버전을 먼저 업그레이드할 수 있습니다.

| 데이터베이스 프록시 버전 | MySQL 커널 버전 요구 사항  | 설명 | 
|---------|---------|---------|
| 1.3.3 |<li>MySQL 5.7 20211030 이상<li>MySQL 8.0 20211202 이상| **수정 사항**<br>세션 연결 풀에서 연결을 재사용하여 change_user를 백엔드로 보낼 때 오류가 보고되는 문제와 새 연결이 설정된 후 데이터베이스 프록시에서 prepare 문이 올바르게 처리되지 않는 문제를 수정했습니다.| 
| 1.3.2 |<li>MySQL 5.7 20211030 이상<li>MySQL 8.0 20211202 이상| **수정 사항**<br>execute 문에 매개변수 유형이 없는 문제를 수정했습니다.| 
| 1.3.1 |<li>MySQL 5.7 20211030 이상<li>MySQL 8.0 20211202 이상| **기능 업데이트**<li>데이터베이스 프록시 아래의 모든 유효한 인스턴스의 가중치가 0일 때 읽기 요청을 유지하기 위해 가중치가 0인 인스턴스가 허용되었습니다. <li>읽기 전용 인스턴스를 다중 AZ에 마운트할 수 있는 다중 AZ 배포 아키텍처를 지원합니다 <li>읽기 전용 모드를 제공합니다. <li>트랜잭션 분할을 지원합니다. <li>스케쥴링된 작업으로 인해 데이터베이스 인스턴스 HA 전환이 발생해도 클라이언트의 연결이 끊기지 않는 순간 연결 끊김 방지, 즉 연결 지속성을 지원합니다. | 
|1.2.1|<li>MySQL 5.7 20211030 이상<li>MySQL 8.0 20211202 이상|**기능 업데이트**<li>기본적으로 대소문자를 확인하지 않음을 나타내는 db lower_case_table_names 매개변수를 지원합니다. <li>데이터베이스 프록시 연결 설정 중에 오류가 발생하면 쿼리 단계에서 오류 메시지 반환을 지원합니다. |
| 1.1.3 |<li>MySQL 5.7 20211030 이상<li>MySQL 8.0 20211202 이상 | **기능 업데이트**<br>MySQL에서 전처리한 COM_PREPARE 패킷에서 hint 라우팅 정보 사용을 지원하며, 이제 hint를 사용하여 PREPARE에서 라우팅 대상을 지정하면 후속 execute 메시지가 지정된 백엔드 노드로 전송됩니다. <br>**수정 사항**<li>데이터베이스 프록시에서 원본 인스턴스의 원본-복제본 전환이 수행된 직후 프런트엔드 연결이 재설정되는 문제를 수정했습니다. <li>읽기 전용 인스턴스가 대기 시간 임계값을 초과하면 로드 밸런싱이 실패할 수 있는 문제를 수정했습니다. 읽기 전용 인스턴스 대기 시간이 임계값 아래로 떨어지면 라우팅이 정상적으로 재개됩니다. <li>MySQL 8.0이 잘못된 핸드셰이크 정보를 반환하고 연결 실패를 일으킬 수 있는 문제를 수정했습니다. | 
| 1.1.2 |<li>MySQL 5.7 20211030 이상<li>MySQL 8.0 20211130 이상| **기능 업데이트**<li>MySQL 8.0을 지원합니다. <li>데이터베이스에 대한 비영구적 연결이 자주 설정되는 시나리오에서 유용한 연결 레벨에서 연결 풀 기능을 지원합니다. 데이터베이스 프록시는 연결을 저장하고 후속 연결 설정 중에 재사용합니다. <li>읽기 전용 인스턴스에 대한 재연결 기능을 지원합니다. 영구 연결 시나리오에서 읽기 전용 인스턴스가 다시 시작되거나 추가되면 데이터베이스 프록시가 자동으로 연결을 설정하고 라우팅을 복원합니다. <li>메모리 사용량을 줄이기 위해 내부 메모리 관리 메커니즘을 업데이트했습니다.<br>**수정 사항**<li>시간 초과로 인해 백엔드 연결이 종료된 후에도 클라이언트 연결이 지속되는 문제를 수정했습니다. <li>내부 캐시로 인해 메모리 사용률이 지나치게 빠르게 증가할 수 있는 문제를 수정했습니다. <li>잘못된 형식의 패킷이 다시 표시되는 가끔 발생하는 문제를 수정했습니다.| 
| 1.0.1 |MySQL 5.7 20201230 이상| **기능 업데이트**<li>MySQL 5.7을 지원합니다. <li>읽기/쓰기 분리를 지원합니다. <li>읽기/쓰기 분리에서 읽기 가중치 지정을 지원합니다. <li>원본 복제본 복제 지연 임계값 구성을 지원합니다. 지연이 임계값을 초과하면 읽기 전용 인스턴스로의 라우팅이 중지되고 임계값 아래로 떨어지면 복구됩니다. 원본-복제본 복제가 중단되면 연결이 끊긴 읽기 전용 인스턴스가 직접 제거됩니다. <li>최소한의 읽기 전용 인스턴스 구성을 지원했습니다. 읽기 전용 인스턴스를 제거할 때 숫자를 n으로 설정하면 라우팅을 위해 n개 이상의 인스턴스가 유지됩니다. <li>기본적으로 활성화된 장애 조치 구성을 지원합니다. 비활성화되고 원본 인스턴스의 읽기 가중치가 0인 경우 모든 읽기 전용 인스턴스가 제거된 후 읽기 요청에 대해 오류가 보고됩니다. 장애 조치가 활성화되고 원본 인스턴스의 읽기 가중치가 0이 아니면 요청이 원본 인스턴스로 라우팅됩니다. <li>hint 구문을 사용하여 라우터 노드를 지정하도록 지원됩니다. | 

