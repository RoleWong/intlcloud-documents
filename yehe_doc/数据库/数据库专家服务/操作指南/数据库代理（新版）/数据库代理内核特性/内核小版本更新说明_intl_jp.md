ここでは、TencentDB for MySQLデータベースエージェントのバージョンアップ説明をご紹介します。

## データベースエージェントバージョンの確認
インスタンスの[データベースエージェント](https://www.tencentcloud.com/document/product/236/42052)ページの**概要** > **エージェントバージョン**で確認してください。
![](https://staticintl.cloudcachetci.com/yehe/backend-news/A5SJ759_4.png)

## バージョンアップの説明
>?TencentDB for MySQLのカーネルマイナーバージョン要求を満たしていない場合、データベースのカーネルマイナーバージョンをアップグデートしてください。詳細については[カーネルマイナーバージョンのアップデート](https://intl.cloud.tencent.com/document/product/236/36816)をご参照ください。

| データベースエージェントバージョン | MySQLカーネルバージョン要求  | 説明 | 
|---------|---------|---------|
| 1.3.3 |<li>MySQL 5.7 20211030以降<li>MySQL 8.0 20211202以降| **問題の修正**<br>セッション接続プールで接続を再利用するとき、バックエンドにchange_userを送信するとエラーの発生、データベースエージェントの例外処理、新規接続後のprepare文が正しく処理されない問題を修正しました。| 
| 1.3.2 |<li>MySQL 5.7 20211030以降<li>MySQL 8.0 20211202以降| **問題の修正**<br>execute文にパラメータ型がない問題を修正しました。| 
| 1.3.1 |<li>MySQL 5.7 20211030以降<li>MySQL 8.0 20211202以降| **機能更新**<li>データベースエージェントにおけるすべての有効なインスタンスの重み付けが0の場合、重み付けが0のインスタンスも読み取りリクエストを分担します<li>複数のアベイラビリティーゾーン配置アーキテクチャをサポートし、アベイラビリティーゾーン間の読み取り専用インスタンスをマウントします。<li>読み取り専用モードを提供します。<li>トランザクションの分割機能をサポートします。<li>瞬間接続切断防止をサポートしています。つまり、接続を保持し、スケジュールされたタスクによるデータベースインスタンスのHA切り替えが行われても、クライアント接続が切断されません。| 
|1.2.1|<li>MySQL 5.7 20211030以降<li>MySQL 8.0 20211202以降|**機能更新**<li>db lower_case_table_namesパラメータをサポートしています。デフォルトでは大文字と小文字は区分されません。<li>データベースエージェントの接続段階でエラーが発生すると、クエリー段階でエラーメッセージが返されます。|
| 1.1.3 |<li>MySQL 5.7 20211030以降<li>MySQL 8.0 20211202以降| **機能更新**<br>は、MySQLによって前処理されたCOM_PREPAREメッセージでのhintルーティング情報の使用をサポートしています。PREPAREでhintを使用してルーティングターゲットを指定した後、後続のexecuteメッセージは指定のバックエンドノードに転送されます。<br>**問題の解決**<li>データベースエージェントのマスターインスタンスがマスター/スレーブを切り替えた後、フロントエンドの接続はすぐにリセットされます。<li>読み取り専用インスタンスがディレーのしきい値を超えた後、Cloud Load Balancer(CLB)が失敗する可能性がある問題を修正しました。現在、読み取り専用インスタンスのしきい値以内に戻ると、ルーティングは正常に回復します。<li>MySQL 8.0が誤ったハンドシェイクを返すことによる接続失敗の可能性がある問題を修正しました。| 
| 1.1.2 |<li>MySQL 5.7 20211030以降<li>MySQL 8.0 20211130以降| **機能更新**<li>MySQL 8.0をサポートします。<li>セッションレベル接続プール機能をサポートし、ショートコネクショントランザクションでデータベースに接続を頻繁に確立するシーンに対応します。データベースエージェントは次回接続確立時に再利用できるように、接続を保存します。<li>読み取り専用インスタンスの再接続機能をサポートします。ロングコネクションのシーンで、読み取り専用インスタンスが再起動し、または、新しい読み取り専用インスタンスを追加した場合、データベースエージェントは、自動的に読み取り専用インスタンスへの接続を確立し、ルーティングを回復します。<li>内部メモリ管理メカニズムを更新しました。新しいバージョンでは、メモリ消費量がさらに抑えられます。<br>**問題の修正**<li>バックエンドの接続がタイムアウトで切断された場合、クライアントの接続が切断されないバグを修正しました。<li>内部キャッシュによるメモリ消費量が著しく増加するバグを修正しました。<li>滅多に発生しませんが、フォーマットが間違ったメッセージが返されるバグを修正しました。| 
| 1.0.1 |MySQL 5.7 20201230以降| **機能更新**<li>MySQL 5.7をサポートします。<li>読み取り/書き込み分離をサポートします。<li>読み取り/書き込み分離が有効になっている場合、読み取りウェイトを再設定することをサポートします。<li>マスター/スレーブレプリケーション遅延しきい値の設定をサポートします。読み取り専用インスタンスは遅延がしきい値に達すると、ルーティングから外され、遅延がしきい値を下回ると、ルーティングを再開します。マスター/スレーブレプリケーションが中断した場合、中断された読み取り専用インスタンスを外します。<li>最小保持数の設定をサポートします。読み取り専用インスタンスが外された際、最小保持数にnを設定した場合、ルーティングに最低限でn個の読み取り専用インスタンスを保持します。<li>フェイルオーバーの設定をサポートします。デフォルトは有効です。フェイルオーバーが無効になり、マスターインスタンスの読み取りウェイトが0の場合、すべての読み取り専用インスタンスが外されると、読み取りリクエストのエラーが発生します。フェイルオーバーが有効になっている場合、または、マスターデータベースの読み取りウェイトが0ではない場合、リクエストはマスターインスタンスにルーティングされます。<li>hint構文によるルーティングノードの設定をサポートします。| 

