## 操作场景
账号风控平台支持管理员按照业务需求对创建的应用进行配置，包括基本信息配置（图标、名称等）、参数配置（重定向地址、登出地址等）、流程配置（注册、登录、找回密码、协议管理等）。

## 操作步骤
1. 登录 [账号风控平台](https://console.tencentcloud.com/ciam)，在左侧导航栏选择**应用管理**，进入应用管理页面。
2. 在应用管理页面，单击操作列的**配置**，进入应用配置的基本信息页面。
![img](https://qcloudimg.tencent-cloud.cn/raw/f62642ab3f8f7daee9f1fb96f4e64f95.png)

### 基本信息
![img](https://qcloudimg.tencent-cloud.cn/raw/e59c8e64dc4077735087dbb24ccc54dc.png)

### 参数配置
1. 在应用配置页面，单击**参数配置**，切换到应用配置的参数配置页面。
2. 在参数配置页面，根据要求填写相关信息后，单击**确定**保存。
![img](https://qcloudimg.tencent-cloud.cn/raw/a63735cbd86086674c779b1a10948c1b.png)

参数说明：

| 参数                 | 描述                                                         | 示例值                                    |
| -------------------- | ------------------------------------------------------------ | ----------------------------------------- |
| Redirect  URI        | 填写以 http 或 https 开头的完整 URL 地址，用于接收 OAuth 协议的 authorization code，用户允许授权后，将会携带 code 重定向到该地址 | [https://www.qq.com](https://www.qq.com/) |
| Logout Redirect  URI | 填写以 http 或 https 开头的完整 URL 地址，为用户登出后的跳转地址 | https://www.qq.com/logout                 |
| access_token 有效期  | access_token 有效期，默认600秒                               | 600                                       |
| refresh_toke         | refresh token 是否启用                                       | -                                         |
| reflesh_token 有效期 | reflesh_token 有效期，需要刷新 token 时指定，默认为86400秒   | 86400                                     |


### 流程配置
流程配置主要包括注册流程、登录流程、MFA 流程、忘记用户名流程、忘记密码流程的配置。通过配置不同的参数，自定义应用对注册、登录等流程的不同需求。

对于 Web、单页、移动 App 类型的应用，支持对注册流程、登录流程、MFA 流程、忘记用户名流程、忘记密码流程的配置。

####  Web、单页和移动 App 应用配置
1. 在应用配置页面，单击**流程配置**，切换到应用配置的流程配置页面。
2. 在流程配置页面，包含注册流程、登录流程、MFA 流程、忘记用户名流程、忘记密码流程等五大模块。
 - **注册流程**：单击模块右上角**编辑**，配置相关参数，单击**确定**保存配置。
 ![img](https://qcloudimg.tencent-cloud.cn/raw/065bed07c86f39ec36f01089c5a8797c.png)

 **参数说明：**
   - 是否启用：默认启用，关闭后用户无法注册。
    
   - 认证属性：注册时需要用户填写，可以用作唯一用户标识。
    
   - 短信 OTP 认证源：注册时发送短信 OTP 的策略，认证属性选择电话号码时需要选择。
    
   - 邮箱 OTP 认证源：注册时发送短信 OTP 的策略，认证属性选择邮箱地址时需要选择。
    
   - 普通属性：注册时需要用户填写，不可用作唯一用户标识。
    
   - 所属用户组：用户注册成功后的归属分组。
    
   - 自动登录：开启自动登录，用户注册成功后自动登录应用，否则跳转登录页，让用户手动登录。
    
   - 同意声明：开启同意声明，可设置注册页的同意声明，设置说明如下。
     
      ![img](https://qcloudimg.tencent-cloud.cn/raw/07c36b6b77876cd8b7dfe66a33ccf9e6.png)

 - **登录流程**：单击模块右上角**编辑**，配置相关参数，单击**确定**保存配置。
   ![img](https://qcloudimg.tencent-cloud.cn/raw/70c557c7ff753110251c74f27e1a0bb8.png)
   **参数说明：**
   
   - 是否启用：默认启用，关闭后用户无法登录。
   - 首选认证源：登录页显示的首选认证方式。
   - 关联认证源：登录页显示的备选认证方式。
   - claims：获取 Token 和获取用户信息接口返回的用户属性字段。
   - 记住密码：控制浏览器是否记住密码。
   - 同意声明：开启同意声明，可设置登录页的同意声明。
   
 - **MFA 流程**：单击模块右上角**编辑**，配置相关参数，单击**确定**保存配置。
   ![img](https://qcloudimg.tencent-cloud.cn/raw/406d568e4bb00ca61bc8e7d6ee75fb5d.png)
**参数说明：**
   
   - 是否启用：默认不启用，启用后将开启双因子认证。
   - 关联认证源：包括短信 OTP 认证源和邮箱 OTP 认证源两种认证方式。
   
 - **忘记用户名流程**：单击模块右上角**编辑**，配置相关参数，单击**确定**保存配置。
   ![img](https://qcloudimg.tencent-cloud.cn/raw/d7ec0398ce185af23d034c3c39f449a8.png)
**参数说明：**
   
   - 是否启用：默认启用，关闭后用户无法找回用户名。
   - 找回方式：接收用户名的方式，如邮箱。
   
 - **忘记密码流程**：单击模块右上角**编辑**，配置相关参数，单击**确定**保存配置。
   ![img](https://qcloudimg.tencent-cloud.cn/raw/4f995aab8e8fa8278b7f411df15c5bd3.png)

 **参数说明：**

   - 是否启用：默认启用，关闭后用户无法重置密码。
   - 找回方式：接收验证码的方式，用于重置密码，如邮箱。

### 安全域 CORS
如需使用 JavaScript 调用 CIAM API，必须配置信任的 CORS 安全域才能成功调用，最多可配置10条。
1. 在应用配置页面，单击**安全域 CORS**，切换到应用配置的安全配置页面。
2. 在安全配置页面，单击**编辑**。
![img](https://qcloudimg.tencent-cloud.cn/raw/8867afd3c9121938488b9e7613af4f09.png)
3. 根据要求填写相关信息后，单击确定**保存**配置。
![img](https://qcloudimg.tencent-cloud.cn/raw/710a263544c07ee2cbe3ecdc59735227.png)


#### 注意事项
- 应用的 Redirect URI 已经默认添加到了 CORS 安全域中，无需在此处重复配置。
- 安全域需以 https:// 或 http:// 开头，格式为 <协议名> "://" <域名或IP地址> [ ":" <端口号> ]，例如 `https://sample.portal.tencentciam.com` 或 `http://127.0.0.1:8080`，不支持携带请求路径。
- 域名部分只允许包含小写字母、数字、半角.、半角*、半角-；域名的每一段中，-不能作为开头或结尾，也不能有连续的-；域名的第一段允许为 *，代表匹配任意子域，例如 `https://*.example.com`；域名的其他段不允许为 *。